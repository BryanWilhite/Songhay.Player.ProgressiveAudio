var rx;(()=>{"use strict";var e={d:(t,n)=>{for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{BoleroUtility:()=>o,ProgressiveAudioUtility:()=>l});class n{static animate(e){var t;if(!n.animationId)return;const i=n.registry.get(n.animationId);i&&(i.shouldStopAnimation||(e||(e=window.performance.now()),i.isStartOfAnimation()&&(i.startTime=e,i.previousTime=i.startTime),i.frameId=window.requestAnimationFrame(n.animate),i.currentTime=e,i.delta=i.currentTime-(null!==(t=i.previousTime)&&void 0!==t?t:0),i.delta>i.fpsInterval&&(i.previousTime=i.currentTime-i.delta%i.fpsInterval,i.motionFunction(i),++i.frameCount)))}static cancelAnimation(e){const t=null!=e?e:n.animationId;if(!t)return;const i=n.registry.get(t);i&&i.frameId&&(i.shouldStopAnimation=!0,window.cancelAnimationFrame(i.frameId))}static registerAndGenerate(e,t){const i=new n(e,t),r=n.registry.size+1;return i.id=r,n.animationId=r,n.registry.set(r,i),i}constructor(e,t){0===Math.abs(e)&&(e=1),this.fps=e,this.fpsInterval=1e3/e,this.frameCount=0,this.motionFunction=t,this.delta=null,this.currentTime=null,this.frameId=null,this.id=null,this.previousTime=null,this.shouldStopAnimation=!1,this.startTime=null}getCurrentFps(){const e=this.getElapsedTimeOfAnimation();return e&&this.frameCount?Math.round(1e3/(e/this.frameCount)*100)/100:0}getDiagnosticStatus(){return`elapsed time: ${this.getElapsedTimeOfAnimationInSeconds()} seconds @ ${this.getCurrentFps()} fps`}getElapsedTimeOfAnimation(){return this.currentTime&&this.startTime?this.currentTime-this.startTime:0}getElapsedTimeOfAnimationInSeconds(){return Math.round(this.getElapsedTimeOfAnimation()/1e3*100)/100}isStartOfAnimation(){return!this.startTime&&!this.previousTime}}n.registry=new Map;class i{constructor(e,t,n){this.r=e,this.g=t,this.b=n}}class r{static getChildHtmlElementByQuery(e,t){return e?e.querySelector(t):(console.warn("the expected parent element is not here"),null)}static getChildHtmlElementsByQuery(e,t){return e?e.querySelectorAll(t):(console.warn("the expected parent element is not here"),null)}static getClosestHtmlElementByQuery(e,t){return e?e.closest(t):(console.warn("the expected parent element is not here"),null)}static getHtmlElement(e){const t=e.nativeElement;return t||(console.warn("the expected element is not here"),null)}static getHtmlElements(e){const t=Array.from(e);return t?t.length?t:(console.warn("the expected number of element children is not here"),[]):(console.warn("the expected element children are not here"),[])}static getHtmlHeadingElement(e=0,t=document){if(!t)return null;return 0<e&&e<7?t.createElement(`h${e}`):t.createElement("h2")}static getStyleDeclaration(e){if(!e)return null;const t=e.style;return t||(console.warn("the expected CSS style declaration is not here"),null)}static parseAsHtmlElement(e,t="div"){if(!e)return null;const n=r.parseAsHtmlElements(e,t);return n.length?n[0]:null}static parseAsHtmlElements(e,t){if(!e)return[];const n=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName(t);return Array.from(n).map((e=>e))}static runWhenElementEvent(e,t,n){n&&e.addEventListener(t,(e=>n(e)))}static runWhenWindowContentLoaded(e){e&&window.addEventListener("DOMContentLoaded",(t=>e(t)))}static timeout(e){return new Promise((t=>setTimeout(t,e)))}}class o{}o.css=class{static getColorHex(e){return e?e.replace("0x","#").toLowerCase():null}static getColorRgb(e){return e?`${e.r}, ${e.g}, ${e.b}`:null}static getComputedStylePropertyValue(e,t){if(!e)return null;if(!t)return null;return window.getComputedStyle(e).getPropertyValue(t)}static getComputedStylePropertyValueById(e,t){if(!e)return null;if(!t)return null;const n=window.document.getElementById(e);if(!n)return null;return window.getComputedStyle(n).getPropertyValue(t)}static getComputedStylePropertyValueByQuery(e,t){if(!e)return null;if(!t)return null;const n=window.document.querySelector(e);if(!n)return null;return window.getComputedStyle(n).getPropertyValue(t)}static getOpacity(e){return parseInt(e,10)/100}static getPixelValue(e){return`${e}px`}static getRgbFromHex(e){if(!e)return null;e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,((e,t,n)=>e+e+t+t+n+n));const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?new i(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)):null}static getTintedBackground(e){if(!e)return null;const t=this.getColorHex(e.backgroundColor),n=this.getColorRgb(this.getRgbFromHex(t)),i=e.alpha;return`linear-gradient(rgba(${n}, ${i}), rgba(${n}, ${i})), ${this.getUri(e.backgroundImageUri)}`}static getUri(e){return`url('${e}')`}static setComputedStylePropertyValue(e,t,n){e&&t&&n&&e.style.setProperty(t,n)}},o.dom=r;function a(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function l(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((i=i.apply(e,t||[])).next())}))}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;class l{static getHTMLAudioElement(){return window.document.querySelector("#audio-player-container>audio")}static getPlayPauseButtonElement(){return window.document.querySelector("#play-pause-block>button")}static getPlayPauseInputElement(){return window.document.querySelector("#play-pause-block>input")}static handleAudioMetadataLoadedAsync(e){return a(this,void 0,void 0,(function*(){const t=l.getPlayPauseButtonElement(),n=l.getHTMLAudioElement();t&&(t.disabled=!0),yield l.invokeDotNetMethodAsync(e,n),t&&(t.disabled=!1)}))}static invokeDotNetMethodAsync(e,t){var i;return a(this,void 0,void 0,(function*(){try{yield e.invokeMethodAsync("animateAsync",{animationStatus:null===(i=l.playAnimation)||void 0===i?void 0:i.getDiagnosticStatus(),audioCurrentTime:null==t?void 0:t.currentTime,audioDuration:null==t?void 0:t.duration,audioReadyState:null==t?void 0:t.readyState,isAudioPaused:null==t?void 0:t.paused})}catch(e){console.error({error:e}),n.cancelAnimation()}}))}static loadAudioTrack(e){const t=l.getHTMLAudioElement();null==t||t.setAttribute("src",e),null==t||t.load()}static startPlayAnimation(e){const t=l.getPlayPauseButtonElement(),i=l.getHTMLAudioElement();if(t&&(t.disabled=!0),!l.isInputEventingApplied){const e=l.getPlayPauseInputElement();null==e||e.addEventListener("change",(()=>{const t=l.getHTMLAudioElement();t&&(console.warn({input:e}),t.currentTime=parseFloat(null==e?void 0:e.value))}))}const r=window.setTimeout((()=>a(this,void 0,void 0,(function*(){!(null==i?void 0:i.ended)&&(null==i?void 0:i.paused)&&(null==i?void 0:i.readyState)>0&&(window.clearTimeout(r),yield i.play())}))),250);l.playAnimation=n.registerAndGenerate(1,(t=>a(this,void 0,void 0,(function*(){if(null==i?void 0:i.ended)return i.currentTime=0,void(yield l.stopPlayAnimationAsync(e));yield l.invokeDotNetMethodAsync(e,i)})))),n.animate(),t&&(t.disabled=!1)}static stopPlayAnimationAsync(e){var t,i;return a(this,void 0,void 0,(function*(){const r=l.getPlayPauseButtonElement(),o=l.getHTMLAudioElement();r&&(r.disabled=!0),o&&!o.paused&&o.readyState>0&&o.pause(),yield l.invokeDotNetMethodAsync(e,o),n.cancelAnimation(null!==(i=null===(t=l.playAnimation)||void 0===t?void 0:t.id)&&void 0!==i?i:void 0),r&&(r.disabled=!1)}))}}l.isInputEventingApplied=!1,l.playAnimation=null,rx=t})();