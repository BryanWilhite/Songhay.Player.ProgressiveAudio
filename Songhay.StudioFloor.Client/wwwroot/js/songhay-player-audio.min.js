var rx;(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{BoleroUtility:()=>a,ProgressiveAudioUtility:()=>l});class n{static animate(e){var t;if(!n.animationId)return;const r=n.registry.get(n.animationId);r&&(r.shouldStopAnimation||(e||(e=window.performance.now()),r.isStartOfAnimation()&&(r.startTime=e,r.previousTime=r.startTime),r.frameId=window.requestAnimationFrame(n.animate),r.currentTime=e,r.delta=r.currentTime-(null!==(t=r.previousTime)&&void 0!==t?t:0),r.delta>r.fpsInterval&&(r.previousTime=r.currentTime-r.delta%r.fpsInterval,r.motionFunction(r),++r.frameCount)))}static cancelAnimation(e){const t=null!=e?e:n.animationId;if(!t)return;const r=n.registry.get(t);r&&r.frameId&&(r.shouldStopAnimation=!0,window.cancelAnimationFrame(r.frameId))}static registerAndGenerate(e,t){const r=new n(e,t),i=n.registry.size+1;return r.id=i,n.animationId=i,n.registry.set(i,r),r}constructor(e,t){0===Math.abs(e)&&(e=1),this.fps=e,this.fpsInterval=1e3/e,this.frameCount=0,this.motionFunction=t,this.delta=null,this.currentTime=null,this.frameId=null,this.id=null,this.previousTime=null,this.shouldStopAnimation=!1,this.startTime=null}getCurrentFps(){const e=this.getElapsedTimeOfAnimation();return e&&this.frameCount?Math.round(1e3/(e/this.frameCount)*100)/100:0}getDiagnosticStatus(){return`elapsed time: ${this.getElapsedTimeOfAnimationInSeconds()} seconds @ ${this.getCurrentFps()} fps`}getElapsedTimeOfAnimation(){return this.currentTime&&this.startTime?this.currentTime-this.startTime:0}getElapsedTimeOfAnimationInSeconds(){return Math.round(this.getElapsedTimeOfAnimation()/1e3*100)/100}isStartOfAnimation(){return!this.startTime&&!this.previousTime}}n.registry=new Map;class r{constructor(e,t,n){this.r=e,this.g=t,this.b=n}}class i{static getChildHtmlElementByQuery(e,t){return e?e.querySelector(t):(console.warn("the expected parent element is not here"),null)}static getChildHtmlElementsByQuery(e,t){return e?e.querySelectorAll(t):(console.warn("the expected parent element is not here"),null)}static getClosestHtmlElementByQuery(e,t){return e?e.closest(t):(console.warn("the expected parent element is not here"),null)}static getHtmlElement(e){const t=e.nativeElement;return t||(console.warn("the expected element is not here"),null)}static getHtmlElements(e){const t=Array.from(e);return t?t.length?t:(console.warn("the expected number of element children is not here"),[]):(console.warn("the expected element children are not here"),[])}static getHtmlHeadingElement(e=0,t=document){if(!t)return null;return 0<e&&e<7?t.createElement(`h${e}`):t.createElement("h2")}static getStyleDeclaration(e){if(!e)return null;const t=e.style;return t||(console.warn("the expected CSS style declaration is not here"),null)}static parseAsHtmlElement(e,t="div"){if(!e)return null;const n=i.parseAsHtmlElements(e,t);return n.length?n[0]:null}static parseAsHtmlElements(e,t){if(!e)return[];const n=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName(t);return Array.from(n).map((e=>e))}static runWhenElementEvent(e,t,n){n&&e.addEventListener(t,(e=>n(e)))}static runWhenWindowContentLoaded(e){e&&window.addEventListener("DOMContentLoaded",(t=>e(t)))}static timeout(e){return new Promise((t=>setTimeout(t,e)))}}class a{}a.css=class{static getColorHex(e){return e?e.replace("0x","#").toLowerCase():null}static getColorRgb(e){return e?`${e.r}, ${e.g}, ${e.b}`:null}static getComputedStylePropertyValue(e,t){if(!e)return null;if(!t)return null;return window.getComputedStyle(e).getPropertyValue(t)}static getComputedStylePropertyValueById(e,t){if(!e)return null;if(!t)return null;const n=window.document.getElementById(e);if(!n)return null;return window.getComputedStyle(n).getPropertyValue(t)}static getComputedStylePropertyValueByQuery(e,t){if(!e)return null;if(!t)return null;const n=window.document.querySelector(e);if(!n)return null;return window.getComputedStyle(n).getPropertyValue(t)}static getOpacity(e){return parseInt(e,10)/100}static getPixelValue(e){return`${e}px`}static getRgbFromHex(e){if(!e)return null;e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,((e,t,n)=>e+e+t+t+n+n));const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?new r(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)):null}static getTintedBackground(e){if(!e)return null;const t=this.getColorHex(e.backgroundColor),n=this.getColorRgb(this.getRgbFromHex(t)),r=e.alpha;return`linear-gradient(rgba(${n}, ${r}), rgba(${n}, ${r})), ${this.getUri(e.backgroundImageUri)}`}static getUri(e){return`url('${e}')`}static setComputedStylePropertyValue(e,t,n){e&&t&&n&&e.style.setProperty(t,n)}},a.dom=i;function o(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}s((r=r.apply(e,t||[])).next())}))}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;class l{static handleAudioMetadataLoadedAsync(e,t){return o(this,void 0,void 0,(function*(){yield l.invokeDotNetMethodAsync(e,t)}))}static invokeDotNetMethodAsync(e,t){var r;return o(this,void 0,void 0,(function*(){let i=null;try{i={animationStatus:null===(r=l.playAnimation)||void 0===r?void 0:r.getDiagnosticStatus(),audioCurrentTime:null==t?void 0:t.currentTime,audioDuration:null==t?void 0:t.duration,audioReadyState:null==t?void 0:t.readyState,isAudioPaused:null==t?void 0:t.paused},yield null==e?void 0:e.invokeMethodAsync("animateAsync",i)}catch(t){console.error({error:t,instance:e,data:i}),n.cancelAnimation()}}))}static loadAudioTrack(e,t){null==e||e.setAttribute("src",t),null==e||e.load()}static setAudioCurrentTime(e,t){t&&e&&(t.currentTime=parseFloat(e.value),t.dataset.hasSetCurrentTime="yes"),console.info("setAudioCurrentTime",{readyState:null==t?void 0:t.readyState,paused:null==t?void 0:t.paused,currentTime:null==t?void 0:t.currentTime,hasSetCurrentTime:null==t?void 0:t.dataset.hasSetCurrentTime,inputValue:null==e?void 0:e.value})}static startPlayAnimationAsync(e,t){return o(this,void 0,void 0,(function*(){t&&t.readyState>2&&t.paused?yield t.play():t&&"yes"===t.dataset.hasSetCurrentTime?(yield t.play(),t.dataset.hasSetCurrentTime="no",console.info("startPlayAnimationAsync",{readyState:null==t?void 0:t.readyState,paused:null==t?void 0:t.paused,currentTime:null==t?void 0:t.currentTime,hasSetCurrentTime:null==t?void 0:t.dataset.hasSetCurrentTime,audio:t})):console.error("The audio could not play!","startPlayAnimationAsync",{readyState:null==t?void 0:t.readyState,paused:null==t?void 0:t.paused,currentTime:null==t?void 0:t.currentTime,hasSetCurrentTime:null==t?void 0:t.dataset.hasSetCurrentTime,audio:t}),l.playAnimation=n.registerAndGenerate(1,(n=>o(this,void 0,void 0,(function*(){if(null==t?void 0:t.ended)return console.warn("ended?"),t.currentTime=0,void(yield l.stopPlayAnimationAsync(e,t));yield l.invokeDotNetMethodAsync(e,t)})))),n.animate()}))}static stopPlayAnimationAsync(e,t){var r,i;return o(this,void 0,void 0,(function*(){t&&t.readyState>0&&!t.paused&&t.pause(),yield l.invokeDotNetMethodAsync(e,t),n.cancelAnimation(null!==(i=null===(r=l.playAnimation)||void 0===r?void 0:r.id)&&void 0!==i?i:void 0),console.info("stopPlayAnimationAsync",{readyState:null==t?void 0:t.readyState,paused:null==t?void 0:t.paused,currentTime:null==t?void 0:t.currentTime,hasSetCurrentTime:null==t?void 0:t.dataset.hasSetCurrentTime,audio:t})}))}}l.playAnimation=null,rx=t})();